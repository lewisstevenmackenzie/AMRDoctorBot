2023-07-13 16:10:16,448 [INFO ]  Starting Rasa server on http://0.0.0.0:5005
2023-07-13 16:10:21,218 [INFO ]  Loading model models\20230713-160349-bare-advance.tar.gz...
2023-07-13 16:10:22,834 [INFO ]  Trying to load SpaCy model with name 'en_core_web_sm'.
2023-07-13 16:10:26,828 [INFO ]  Trying to load SpaCy model with name 'en_core_web_sm'.
2023-07-13 16:11:12,462 [WARNI]  The UnexpecTED Intent Policy is currently experimental and might change or be removed in the future ðŸ”¬ Please share your feedback on it in the forum (https://forum.rasa.com) to help us make this feature ready for production.
2023-07-13 16:11:59,087 [INFO ]  Rasa server is up and running.
2023-07-13 16:19:25,825 [ERROR]  Encountered an exception while running action 'action_ask_random_question'.Bot will continue, but the actions events are lost. Please check the logs of your action server for more information.
Traceback (most recent call last):
  File "C:\ProgramData\Anaconda3\envs\installingrasa\lib\site-packages\rasa\core\actions\action.py", line 741, in run
    response: Any = await self.action_endpoint.request(
  File "C:\ProgramData\Anaconda3\envs\installingrasa\lib\site-packages\rasa\utils\endpoints.py", line 173, in request
    raise ClientResponseError(
rasa.utils.endpoints.ClientResponseError: 500, Internal Server Error, body='b'{"error":"list assignment index out of range","request_body":{"next_action":"action_ask_random_question","sender_id":"eec99ee876894bfc903865853fea7fcc","tracker":{"sender_id":"eec99ee876894bfc903865853fea7fcc","slots":{"question1":"True","question2":null,"question3":null,"question4":"True","UseCaseNum":1,"conversationID":null,"session_started_metadata":null},"latest_message":{"intent":{"name":"inform","confidence":0.9999818801879883},"entities":[],"text":"amr is what happens when your body nolonger is affected by the antibiotics. essentially they become useless","message_id":"0f2e1855c37041ffbf71accd6c5a8e2a","metadata":{},"text_tokens":[[0,3],[4,6],[7,11],[12,19],[20,24],[25,29],[30,34],[35,43],[44,46],[47,55],[56,58],[59,62],[63,74],[74,75],[76,87],[88,92],[93,99],[100,107]],"intent_ranking":[{"name":"inform","confidence":0.9999818801879883},{"name":"ask_symptoms","confidence":6.603650945180561e-6},{"name":"ask_for_chatbot_number","confidence":6.32311139270314e-6},{"name":"Prescribe","confidence":1.8146241700378596e-6},{"name":"Ask_prescription_history","confidence":1.0092846878251294e-6},{"name":"greet","confidence":8.749863127377466e-7},{"name":"goodbye","confidence":4.836430775867484e-7},{"name":"deny","confidence":3.6322677487987676e-7},{"name":"ask_more_information","confidence":2.8560776854646974e-7},{"name":"confirm","confidence":2.156456133661777e-7}],"response_selector":{"all_retrieval_intents":[],"default":{"response":{"responses":null,"confidence":0.0,"intent_response_key":null,"utter_action":"utter_None"},"ranking":[]}}},"latest_event_time":1689261563.7455437,"followup_action":null,"paused":false,"events":[{"event":"action","timestamp":1689261205.8098652,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_session_start","policy":null,"confidence":1.0,"action_text":null,"hide_rule_turn":false},{"event":"session_started","timestamp":1689261205.8098652,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"}},{"event":"action","timestamp":1689261205.8098652,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_listen","policy":null,"confidence":null,"action_text":null,"hide_rule_turn":false},{"event":"user","timestamp":1689261206.996864,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"text":"hello","parse_data":{"intent":{"name":"greet","confidence":0.9973514080047607},"entities":[],"text":"hello","message_id":"c38401d8d4974905b412546bb1caa559","metadata":{},"text_tokens":[[0,5]],"intent_ranking":[{"name":"greet","confidence":0.9973514080047607},{"name":"maybe","confidence":0.0008076327503658831},{"name":"ask_more_questions","confidence":0.00040947322850115597},{"name":"ask_more_information","confidence":0.0002842555404640734},{"name":"Ask_prescription_history","confidence":0.0002774550230242312},{"name":"Prescribe","confidence":0.00025208224542438984},{"name":"ask_for_chatbot_number","confidence":0.00023920332023408264},{"name":"goodbye","confidence":0.00012858107220381498},{"name":"ask_symptoms","confidence":0.00010932335862889886},{"name":"inform","confidence":7.488975097658113e-5}],"response_selector":{"all_retrieval_intents":[],"default":{"response":{"responses":null,"confidence":0.0,"intent_response_key":null,"utter_action":"utter_None"},"ranking":[]}}},"input_channel":"socketio","message_id":"c38401d8d4974905b412546bb1caa559"},{"event":"user_featurization","timestamp":1689261211.6037364,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"use_text_for_featurization":false},{"event":"action","timestamp":1689261211.6037364,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_tell_use_case_example","policy":"MemoizationPolicy","confidence":1.0,"action_text":null,"hide_rule_turn":false},{"event":"bot","timestamp":1689261211.60475,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"text":"Hi Doctor, I\\u2019m not feeling 100% today. I think I might have a cold. I\\u2019ve got a runny nose, my throat is also a bit red and sore, and I\\u2019ve had a dry cough for a couple of days. Can I have some antibiotics, please?","data":{"elements":null,"quick_replies":null,"buttons":null,"attachment":null,"image":null,"custom":null}},{"event":"slot","timestamp":1689261211.60475,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"UseCaseNum","value":1},{"event":"action","timestamp":1689261211.650736,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_listen","policy":"MemoizationPolicy","confidence":1.0,"action_text":null,"hide_rule_turn":false},{"event":"user","timestamp":1689261229.3853307,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"text":"no i don\'t think so mate","parse_data":{"intent":{"name":"deny","confidence":0.9994818568229675},"entities":[],"text":"no i don\'t think so mate","message_id":"678ea5f932584943a5690ec0290ed4d0","metadata":{},"text_tokens":[[0,2],[3,4],[5,7],[7,10],[11,16],[17,19],[20,24]],"intent_ranking":[{"name":"deny","confidence":0.9994818568229675},{"name":"Prescribe","confidence":0.00015844327572267503},{"name":"ask_more_information","confidence":0.00015798308595549315},{"name":"maybe","confidence":4.938807978760451e-5},{"name":"goodbye","confidence":3.708511940203607e-5},{"name":"inform","confidence":3.57949138560798e-5},{"name":"ask_for_chatbot_number","confidence":2.7038133339374326e-5},{"name":"ask_more_questions","confidence":2.351063631067518e-5},{"name":"ask_symptoms","confidence":1.5371273548225872e-5},{"name":"confirm","confidence":1.3127975762472488e-5}],"response_selector":{"all_retrieval_intents":[],"default":{"response":{"responses":null,"confidence":0.0,"intent_response_key":null,"utter_action":"utter_None"},"ranking":[]}}},"input_channel":"socketio","message_id":"678ea5f932584943a5690ec0290ed4d0"},{"event":"user_featurization","timestamp":1689261229.4423337,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"use_text_for_featurization":false},{"event":"action","timestamp":1689261229.4423337,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"utter_why_no_antibiotics","policy":"MemoizationPolicy","confidence":1.0,"action_text":null,"hide_rule_turn":false},{"event":"bot","timestamp":1689261229.4423337,"metadata":{"utter_action":"utter_why_no_antibiotics","model_id":"3e55f14fd07645f18b3f23961d046232"},"text":"Okay, but why would you not give me antibiotics? They\\u2019ve worked for me in the past.\\n","data":{"elements":null,"quick_replies":null,"buttons":null,"attachment":null,"image":null,"custom":null}},{"event":"action","timestamp":1689261229.499332,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_listen","policy":"MemoizationPolicy","confidence":1.0,"action_text":null,"hide_rule_turn":false},{"event":"user","timestamp":1689261244.7531788,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"text":"not ever illness need antibiotics to help you recover","parse_data":{"intent":{"name":"inform","confidence":0.9181286096572876},"entities":[],"text":"not ever illness need antibiotics to help you recover","message_id":"1a51f55e81d942d1877d57358c4999ae","metadata":{},"text_tokens":[[0,3],[4,8],[9,16],[17,21],[22,33],[34,36],[37,41],[42,45],[46,53]],"intent_ranking":[{"name":"inform","confidence":0.9181286096572876},{"name":"deny","confidence":0.06153421103954315},{"name":"Prescribe","confidence":0.012316513806581497},{"name":"ask_for_chatbot_number","confidence":0.005499671678990126},{"name":"confirm","confidence":0.0007304230239242315},{"name":"ask_more_questions","confidence":0.00043236653436906636},{"name":"goodbye","confidence":0.00036926957545801997},{"name":"ask_symptoms","confidence":0.000347385328495875},{"name":"ask_more_information","confidence":0.00021611308329738677},{"name":"maybe","confidence":0.0001591636100783944}],"response_selector":{"all_retrieval_intents":[],"default":{"response":{"responses":null,"confidence":0.0,"intent_response_key":null,"utter_action":"utter_None"},"ranking":[]}}},"input_channel":"socketio","message_id":"1a51f55e81d942d1877d57358c4999ae"},{"event":"user_featurization","timestamp":1689261246.9134753,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"use_text_for_featurization":false},{"event":"action","timestamp":1689261246.9134753,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_ask_random_question","policy":"TEDPolicy","confidence":0.3991082012653351,"action_text":null,"hide_rule_turn":false},{"event":"bot","timestamp":1689261246.9144769,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"text":"What sort of medication would you suggest I take if not antibiotics?","data":{"elements":null,"quick_replies":null,"buttons":null,"attachment":null,"image":null,"custom":null}},{"event":"slot","timestamp":1689261246.9144769,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"question4","value":"True"},{"event":"action","timestamp":1689261246.9404848,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_listen","policy":"MemoizationPolicy","confidence":1.0,"action_text":null,"hide_rule_turn":false},{"event":"user","timestamp":1689261261.5635853,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"text":"you should take ibuprofen","parse_data":{"intent":{"name":"Prescribe","confidence":0.9972618818283081},"entities":[],"text":"you should take ibuprofen","message_id":"d93564489e47491f8de5fb9f5ef65541","metadata":{},"text_tokens":[[0,3],[4,10],[11,15],[16,25]],"intent_ranking":[{"name":"Prescribe","confidence":0.9972618818283081},{"name":"Ask_prescription_history","confidence":0.0013146185083314776},{"name":"ask_more_questions","confidence":0.0005821127560921013},{"name":"greet","confidence":0.0002286107774125412},{"name":"ask_for_chatbot_number","confidence":0.00019434315618127584},{"name":"confirm","confidence":0.00016337748093064874},{"name":"deny","confidence":0.0001293634413741529},{"name":"ask_symptoms","confidence":4.630432522390038e-5},{"name":"goodbye","confidence":2.866777685994748e-5},{"name":"maybe","confidence":2.807160490192473e-5}],"response_selector":{"all_retrieval_intents":[],"default":{"response":{"responses":null,"confidence":0.0,"intent_response_key":null,"utter_action":"utter_None"},"ranking":[]}}},"input_channel":"socketio","message_id":"d93564489e47491f8de5fb9f5ef65541"},{"event":"user_featurization","timestamp":1689261261.5835938,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"use_text_for_featurization":false},{"event":"action","timestamp":1689261261.5835938,"metadata":{"query_intent":{"name":"Prescribe","score":-0.1760445535182953,"threshold":0.04310441017150879,"severity":0.21914896368980408},"ranking":[{"name":"inform","score":0.2309616655111313,"threshold":0.22021177411079407,"severity":-0.01074989140033722},{"name":"greet","score":0.22144104540348053,"threshold":-0.3108835816383362,"severity":-0.5323246121406555},{"name":"Ask_prescription_history","score":0.16144832968711853,"threshold":-0.32772576808929443,"severity":-0.48917409777641296},{"name":"ask_for_chatbot_number","score":0.08735665678977966,"threshold":-0.5120896697044373,"severity":-0.5994462966918945},{"name":"goodbye","score":0.053167924284935,"threshold":-0.4875226318836212,"severity":-0.540690541267395},{"name":"Prescribe","score":-0.1760445535182953,"threshold":0.04310441017150879,"severity":0.21914896368980408},{"name":"ask_symptoms","score":-0.19431355595588684,"threshold":-0.5814816951751709,"severity":-0.38716813921928406},{"name":"restart","score":-0.978313684463501,"threshold":null,"severity":null},{"name":"back","score":-1.031873345375061,"threshold":null,"severity":null},{"name":"ask_more_questions","score":-1.0602850914001465,"threshold":null,"severity":null}],"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_unlikely_intent","policy":"UnexpecTEDIntentPolicy","confidence":1.0,"action_text":null,"hide_rule_turn":false},{"event":"action","timestamp":1689261263.752079,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_ask_random_question","policy":"TEDPolicy","confidence":0.4695175886154175,"action_text":null,"hide_rule_turn":false},{"event":"bot","timestamp":1689261263.7530482,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"text":"Thanks, I also saw on an information poster somthing about antimicrobial resistance. What\'s that?","data":{"elements":null,"quick_replies":null,"buttons":null,"attachment":null,"image":null,"custom":null}},{"event":"slot","timestamp":1689261263.7530482,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"question1","value":"True"},{"event":"action","timestamp":1689261263.772086,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"name":"action_listen","policy":"TEDPolicy","confidence":0.44051849842071533,"action_text":null,"hide_rule_turn":false},{"event":"user","timestamp":1689261563.7245514,"metadata":{"model_id":"3e55f14fd07645f18b3f23961d046232"},"text":"amr is what happens when your body nolonger is affected by the antibiotics. essentially they become useless","parse_data":{"intent":{"name":"inform","confidence":0.9999818801879883},"entities":[],"text":"amr is what happens when your body nolonger is affected by the antibiotics. essentially they become useless","message_id":"0f2e1855c37041ffbf71accd6c5a8e2a","metadata":{},"text_tokens":[[0,3],[4,6],[7,11],[12,19],[20,24],[25,29],[30,34],[35,43],[44,46],[47,55],[56,58],[59,62],[63,74],[74,75],[76,87],[88,92],[93,99],[100,107]],"intent_ranking":[{"name":"inform","confidence":0.9999818801879883},{"name":"ask_symptoms","confidence":6.603650945180561e-6},{"name":"ask_for_chatbot_number","confidence":6.32311139270314e-6},{"name":"Prescribe","confidence":1.8146241700378596e-6},{"name":"Ask_prescription_history","confidence":1.0092846878251294e-6},{"name":"greet","confidence":8.749863127377466e-7},{"name":"goodbye","confidence":4.836430775867484e-7},{"name":"deny","confidence":3.6322677487987676e-7},{"name":"ask_more_information","confidence":2.8560776854646974e-7},{"name":"confirm","confidence":2.156456133661777e-7}],"response_selector":{"all_retrieval_intents":[],"default":{"response":{"responses":null,"confidence":0.0,"intent_response_key":null,"utter_action":"utter_None"},"ranking":[]}}},"input_channel":"socketio","message_id":"0f2e1855c37041ffbf71accd6c5a8e2a"},{"event":"user_featurization","timestamp":1689261563.7455437,"use_text_for_featurization":false}],"latest_input_channel":"socketio","active_loop":{},"latest_action":{"action_name":"action_listen"},"latest_action_name":"action_listen"},"domain":{"version":"3.0","session_config":{"session_expiration_time":60,"carry_over_slots_to_new_session":true},"intents":["Ask_prescription_history","Prescribe","ask_for_chatbot_number","ask_more_information","ask_more_questions","ask_symptoms","confirm","deny","goodbye","greet","inform","maybe"],"slots":{"question1":{"type":"text","influence_conversation":false,"mappings":[]},"question2":{"type":"text","influence_conversation":false,"mappings":[]},"question3":{"type":"text","influence_conversation":false,"mappings":[]},"question4":{"type":"text","influence_conversation":false,"mappings":[]},"UseCaseNum":{"type":"text","influence_conversation":false,"mappings":[]},"conversationID":{"type":"text","influence_conversation":false,"mappings":[]}},"responses":{"utter_greet":[{"text":"Hi!\\n"}],"utter_initial_symptoms":[{"text":"Hi Doctor, I\\u2019m not feeling 100% today. I think I might have a cold. I\\u2019ve got a runny nose, my throat is also a bit red and sore, and I\\u2019ve had a dry cough for a couple of days. Can I have some antibiotics, please?\\n"}],"utter_end_conversation":[{"text":"okay, thanks for chatting to me. I\'ll take on board the information you\'ve given me when I come for future consultations.\\n"}],"utter_ask_chat_number":[{"text":"Right, I\'m going to give you a number, could you please type this into the survey response so that we can match this conversation to your survey inorder to assure you are paid appropriatly?\\n"}],"utter_goodbye":[{"text":"okay, thanks for your help today. If you have taken note of your unique conversation number then feel free to close this conversation. Goodbye.\\n"}],"utter_goodbye_no_number":[{"text":"Okay, thanks for your time. however without the chatbot code we will be unable to guarantee payment for this survey.\\n"}],"utter_goodbye_only":[{"text":"Bye.\\n"}],"utter_confirm_refusal":[{"text":"Are you sure? If you don\'t do this, we will be unable to pay for your survey participation.\\n"}],"utter_why_no_antibiotics":[{"text":"Okay, but why would you not give me antibiotics? They\\u2019ve worked for me in the past.\\n"}],"utter_what_is_AMR":[{"text":"So, I\'ve heard a lot of people talking about antimicrobial resistance. What is it?\\n"}],"utter_antibiotic_use":[{"text":"Okay but when would you normally prescribe antibiotics?\\n"}],"utter_alternative_medication":[{"text":"Is there any other medication that I can take to make me feel better?\\n"}],"utter_why_prescribe":[{"text":"Thank you, that makes me feel a lot better. I was wondering though, could you could tell me why you are prescribing me antibiotics rather that a different form of medication?\\n"}],"utter_AMR_concern":[{"text":"I\'ve read a lot about something called antimicrobial resistance, should I be concerned about this?\\n"}],"utter_more_information":[{"text":"i\'m not sure what more to say, i\'ve just been feeling very poorly and haven\'t been able to sleep. What sort of things would you look out for when prescribing antibiotics?\\n"}],"utter_prescription_history":[{"text":"no, i\'ve never taken antibiotics before.\\n"}],"utter_please_rephrase":[{"text":"I\'m sorry, I didn\'t quite understand that. Could you rephrase?"}],"utter_default":[{"text":"Sorry I didn\'t get that. Can you rephrase?"}]},"actions":["...","action_generate_chatbot_number","action_repeat_symptoms","action_tell_use_case_example","action_ask_random_question","action_final_question","action_end_conversation","utter_AMR_concern","utter_alternative_medication","utter_antibiotic_use","utter_ask_chat_number","utter_confirm_refusal","utter_end_conversation","utter_goodbye","utter_goodbye_no_number","utter_goodbye_only","utter_greet","utter_initial_symptoms","utter_what_is_AMR","utter_why_no_antibiotics","utter_why_prescribe","utter_please_rephrase","utter_default","utter_prescription_history","utter_more_information"]},"version":"3.4.0"}}''

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\Anaconda3\envs\installingrasa\lib\site-packages\rasa\core\processor.py", line 874, in _run_action
    events = await action.run(
  File "C:\ProgramData\Anaconda3\envs\installingrasa\lib\site-packages\rasa\core\actions\action.py", line 765, in run
    raise RasaException(
rasa.shared.exceptions.RasaException: Failed to execute custom action 'action_ask_random_question'
2023-07-13 16:44:33,768 [ERROR]  Exception occurred while handling uri: 'ws://localhost:5005/socket.io/?EIO=4&transport=websocket&sid=b_8_7t86gpMqCIYNAAAA'
Traceback (most recent call last):
  File "handle_request", line 124, in handle_request
sanic.exceptions.ServerError: Invalid response type None (need HTTPResponse)
2023-07-13 16:44:36,038 [ERROR]  Task was destroyed but it is pending!
task: <Task pending name='Task-11' coro=<AsyncServer._service_task() running at C:\ProgramData\Anaconda3\envs\installingrasa\lib\site-packages\engineio\asyncio_server.py:498> wait_for=<Future pending cb=[<TaskWakeupMethWrapper object at 0x000001CA103DCD30>()]>>
2023-07-13 16:44:36,045 [ERROR]  Task was destroyed but it is pending!
task: <Task pending name='Task-586' coro=<AsyncSocket.schedule_ping.<locals>.send_ping() done, defined at C:\ProgramData\Anaconda3\envs\installingrasa\lib\site-packages\engineio\asyncio_socket.py:125> wait_for=<Future pending cb=[<TaskWakeupMethWrapper object at 0x000001CA103DCA00>()]>>
